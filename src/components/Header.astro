---
import ThemeToggle from "./ThemeToggle.astro";
---

<header id="site-header" class="fixed top-1 md:top-1 left-1/2 -translate-x-1/2 z-50 w-[92%] md:w-[85%]
  rounded-full bg-gradient-to-r from-gray-800/90 to-gray-700/90 dark:from-dark/90 dark:to-dark-light/90 
  backdrop-blur-lg shadow-xl border border-white/10 px-6 py-3 flex items-center justify-between transition-all duration-500">
  
  <!-- Logo -->
  <a href="/" class="flex items-center gap-2">
    <img src="/favicon.svg" alt="TinyKite logo" class="w-6 h-6" />
    <span class="font-semibold text-white text-lg">TinyKite</span>
  </a>

  <!-- Desktop Navigation -->
  <nav class="hidden md:flex items-center gap-8 text-white text-sm font-medium">
    <a href="/#ecosystem" class="hover:text-secondary-light transition">Ecosystem</a>
    <a href="/blog" class="hover:text-secondary-light transition">Innovation</a>
    <a href="/about" class="hover:text-secondary-light transition">About</a>
    <a href="/blog" class="hover:text-secondary-light transition">Blog</a>
  </nav>

  <!-- CTA + Theme Toggle -->
  <div class=" flex items-center gap-4">
    <a href="/about" class="px-4 py-2 bg-primary text-white text-sm font-semibold rounded-full hover:opacity-90 transition">Join Us</a>
    <ThemeToggle />
  </div>

  <!-- Mobile Menu Icon -->
  <button id="menu-icon" class="md:hidden flex flex-col gap-1.5 items-center justify-center p-2 focus:outline-none">
    <span class="w-6 h-0.5 bg-white rounded-full transition-all"></span>
    <span class="w-6 h-0.5 bg-white rounded-full transition-all"></span>
    <span class="w-6 h-0.5 bg-white rounded-full transition-all"></span>
  </button>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden absolute top-full mt-3 right-0 w-48 bg-dark-light/90 rounded-lg shadow-xl p-4 flex flex-col gap-3 text-white text-sm backdrop-blur-lg">
    <a href="/#ecosystem" class="hover:text-primary">Ecosystem</a>
    <a href="/blog" class="hover:text-primary">Innovation</a>
    <a href="/about" class="hover:text-primary">About</a>
    <a href="/blog" class="hover:text-primary">Blog</a>
  </div>
</header>

<!-- âœ… Script -->
<script>
  // @ts-nocheck
  if (typeof window !== "undefined") {
    const menuIcon = document.getElementById("menu-icon");
    const mobileMenu = document.getElementById("mobile-menu");
    const header = document.getElementById("site-header");

    if (menuIcon && mobileMenu) {
      menuIcon.addEventListener("click", () => {
        menuIcon.classList.toggle("open");
        mobileMenu.classList.toggle("hidden");
      });
    }

    if (header) {
      window.addEventListener("scroll", () => {
        if (window.scrollY > 20) header.classList.add("bg-dark/95", "shadow-md");
        else header.classList.remove("bg-dark/95", "shadow-md");
      });
    }
  }
</script>

<style>
  #menu-icon.open span:nth-child(1) {
    transform: translateY(7px) rotate(45deg);
  }
  #menu-icon.open span:nth-child(2) {
    opacity: 0;
  }
  #menu-icon.open span:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg);
  }
</style>